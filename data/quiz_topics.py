from telegram import InlineKeyboardButton, InlineKeyboardMarkup

# –î–∞–Ω–Ω—ã–µ –æ —Ç–µ–º–∞—Ö –∫–≤–∏–∑–∞
QUIZ_TOPICS = {
    'programming': {
        'name': '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ',
        'emoji': 'üíª',
        'prompt': '–°–æ–∑–¥–∞–π –≤–æ–ø—Ä–æ—Å –æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö. –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ A, B, C, D. –í –∫–æ–Ω—Ü–µ —É–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.'
    },
    'history': {
        'name': '–ò—Å—Ç–æ—Ä–∏—è',
        'emoji': 'üèõÔ∏è',
        'prompt': '–°–æ–∑–¥–∞–π –≤–æ–ø—Ä–æ—Å –ø–æ –∏—Å—Ç–æ—Ä–∏–∏, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º —Å–æ–±—ã—Ç–∏—è–º –∏–ª–∏ –ª–∏—á–Ω–æ—Å—Ç—è–º. –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ A, B, C, D. –í –∫–æ–Ω—Ü–µ —É–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.'
    },
    'science': {
        'name': '–ù–∞—É–∫–∞',
        'emoji': 'üî¨',
        'prompt': '–°–æ–∑–¥–∞–π –≤–æ–ø—Ä–æ—Å –ø–æ —Ñ–∏–∑–∏–∫–µ, —Ö–∏–º–∏–∏ –∏–ª–∏ –±–∏–æ–ª–æ–≥–∏–∏. –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ A, B, C, D. –í –∫–æ–Ω—Ü–µ —É–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.'
    },
    'geography': {
        'name': '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è',
        'emoji': 'üåç',
        'prompt': '–°–æ–∑–¥–∞–π –≤–æ–ø—Ä–æ—Å –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏, —Å—Ç—Ä–∞–Ω–∞–º, —Å—Ç–æ–ª–∏—Ü–∞–º –∏–ª–∏ –ø—Ä–∏—Ä–æ–¥–µ. –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ A, B, C, D. –í –∫–æ–Ω—Ü–µ —É–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.'
    },
    'movies': {
        'name': '–ö–∏–Ω–æ',
        'emoji': 'üé¨',
        'prompt': '–°–æ–∑–¥–∞–π –≤–æ–ø—Ä–æ—Å –æ —Ñ–∏–ª—å–º–∞—Ö, –∞–∫—Ç–µ—Ä–∞—Ö –∏–ª–∏ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–µ. –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤ A, B, C, D. –í –∫–æ–Ω—Ü–µ —É–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.'
    }
}

def get_quiz_topics_keyboard() -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Ç–µ–º–∞–º–∏ –∫–≤–∏–∑–∞"""
    keyboard = []
    for topic_key, topic_data in QUIZ_TOPICS.items():
        keyboard.append([
            InlineKeyboardButton(
                f"{topic_data['emoji']} {topic_data['name']}",
                callback_data=f"quiz_topic_{topic_key}"
            )
        ])
    return InlineKeyboardMarkup(keyboard)

def get_quiz_topic_data(topic_key: str) -> dict:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–º–µ –∫–≤–∏–∑–∞"""
    return QUIZ_TOPICS.get(topic_key)

def get_quiz_continue_keyboard(topic_key: str) -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∫–≤–∏–∑–∞"""
    keyboard = [
        [
            InlineKeyboardButton("üîÑ –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å", callback_data=f"quiz_continue_{topic_key}"),
            InlineKeyboardButton("üîÑ –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É", callback_data="quiz_change_topic")
        ],
        [InlineKeyboardButton("üèÅ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∫–≤–∏–∑", callback_data="quiz_finish")]
    ]
    return InlineKeyboardMarkup(keyboard) 